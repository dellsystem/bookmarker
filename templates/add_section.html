{% extends "base.html" %}

{% block breadcrumbs %}
<a class="section" href="{% url 'view_book' book.pk %}">View book</a>
<i class="right angle icon divider"></i>
<div class="active section">Add section</div>
{% endblock %}

{% block content %}
{% include 'book_header.html' with book=book only %}

<div class="ui divider"></div>
{% with count=book.sections.count %}
{% if count %}
<h3>
    Existing sections ({{ count }} total)
</h3>
<div class="ui two column celled grid">
    <div class="column">
        {% include 'section_list.html' with sections=sections_1 only %}
    </div>
    <div class="column">
        {% include 'section_list.html' with sections=sections_2 only %}
    </div>
</div>
{% else %}
<div class="ui warning message">
    <div class="header">
        No sections yet!
    </div>
</div>
{% endif %}
{% endwith %}

<div class="ui segment">
    <form class="ui form" method="post">
        {% csrf_token %}
        <div class="ui fields">
            {% with error=form.title.errors %}
            <div class="nine wide {% if error %}error{% endif %} field">
                <label>Title{% if error %} (REQUIRED){% endif %}</label>
                {{ form.title }}
            </div>
            {% endwith %}
            <div class="six wide field">
                <label>Subtitle</label>
                {{ form.subtitle }}
            </div>
            <div class="one wide field">
                <label>1st page</label>
                {{ form.first_page }}
            </div>
        </div>
        <div class="field">
            <label>Summary</label>
            {{ form.summary }}
        </div>
        <div class="ui basic center aligned segment">
            <button type="submit" name="submit"
                    class="ui blue button">
                Submit
            </button>
        </div>
    </form>
</div>
{% endblock %}
